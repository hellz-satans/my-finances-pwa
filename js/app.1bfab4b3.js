(function(e){function t(t){for(var a,c,s=t[0],i=t[1],u=t[2],f=0,d=[];f<s.length;f++)c=s[f],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&d.push(r[c][0]),r[c]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);l&&l(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var i=n[s];0!==r[i]&&(a=!1)}a&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={app:0},o=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=i;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"00fa":function(e,t,n){},"080d":function(e,t,n){"use strict";n("9f72")},"0f81":function(e,t,n){"use strict";n("f004")},"1a14":function(e,t,n){},"2c67":function(e,t,n){},"389d":function(e,t,n){},"449d":function(e,t,n){},"46cb":function(e,t,n){"use strict";n("b068")},"56d7":function(e,t,n){"use strict";n.r(t);n("4de4"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=n("2f62"),o=n("5a0c"),c=n.n(o),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"my-finances"},[n("transition",{attrs:{name:"fade"}},[e.isLoading?n("loader"):e._e()],1),e.isLoading?e._e():n("section",[n("header",{staticClass:"flex justify-between items-baseline py-1 px-3 border-b-2 border-grey-900"},[n("router-link",{staticClass:"title",attrs:{to:"/"}},[e._v("My Finances")]),n("sidebar")],1),"home"==e.currentRoute?n("nav",[n("router-link",{staticClass:"expense-form-button text-white bg-green-500",attrs:{to:"/expense/new"}},[n("fa",{attrs:{icon:"plus"}})],1),n("router-link",{staticClass:"transfer-form-button text-white bg-blue-500",attrs:{to:"/transfer"}},[n("fa",{attrs:{icon:"exchange-alt"}})],1)],1):e._e(),n("router-view")],1)],1)},i=[],u=(n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loader"},[n("fa",{staticClass:"loader-bill",attrs:{icon:["fas","money-bill-alt"]}}),n("fa",{staticClass:"loader-bill",attrs:{icon:["fas","money-bill-alt"]}}),n("fa",{staticClass:"loader-bill",attrs:{icon:["fas","money-bill-alt"]}}),n("fa",{staticClass:"loader-wallet",attrs:{icon:["fas","wallet"]}})],1)}),l=[],f={name:"Loader"},d=f,p=(n("a071"),n("2877")),m=Object(p["a"])(d,u,l,!1,null,null,null),h=m.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("aside",{staticClass:"sidebar"},[n("a",{staticClass:"pointer burger text-large mr-1",attrs:{href:"#"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.visible=!e.visible}}},[n("fa",{attrs:{icon:e.visible?"times":"bars"}})],1),n("transition",{attrs:{name:"grow-235"}},[e.visible?n("nav",e._l(e.routes,(function(t){return t.hide?e._e():n("router-link",{key:t.name,attrs:{to:t.path,exact:t.exact},nativeOn:{click:function(t){e.visible=!1}}},[n("fa",{attrs:{icon:["fas",t.icon]}}),n("span",[e._v(e._s(t.name))])],1)})),1):e._e()])],1)},g=[],b={name:"Sidebar",data:function(){return{visible:!1}},computed:{routes:function(){return this.$router.options.routes}}},v=b,x=(n("f203"),Object(p["a"])(v,y,g,!1,null,null,null)),k=x.exports,_=2600,w={name:"MyFinances",components:{Loader:h,Sidebar:k},data:function(){return{isLoading:!0,routes:this.$router.options.routes}},computed:{currentRoute:function(){return this.$route.name}},created:function(){var e=this;this.$store.dispatch("accounts/createCashAccount"),this.$store.dispatch("categories/seedData"),this.$store.commit("accounts/getAccounts"),this.$store.commit("preferences/getPreferences"),this.$store.commit("expenses/getExpenses"),window.setTimeout((function(t){return e.isLoading=!1}),_)}},C=w,O=(n("92ab"),Object(p["a"])(C,s,i,!1,null,"780166e0",null)),j=O.exports,S=n("8c4f"),A=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},E=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"about m-4"},[n("p",[e._v("Expenses record keeper without a back-end ("),n("i",[e._v("yet")]),e._v(", more on that later) — "),n("strong",[e._v("easy to use, easy to erase")]),e._v(".")]),n("p",[e._v("It's hard keeping record on what you spend money, and if you're a bit paranoid with your phone and apps, it continues to be hard. We're writing this simple application to keep a record and easily dispose the information — "),n("b",[e._v("or not!")]),e._v(" We're also writing a cloud storage for the information, but that comes later.")]),n("p",[e._v("The "),n("b",[e._v("first phase")]),e._v(" of the project consists of a "),n("abbr",{attrs:{title:"Progressive Web Application"}},[e._v("PWA")]),e._v(" using "),n("a",{attrs:{href:"https://vuejs.org"}},[e._v("Vue")]),e._v(" and browsers' IndexedDB through "),n("a",{attrs:{href:"https://dexie.org"}},[e._v("Dexie.js")]),e._v(".")]),n("p",[e._v("The "),n("b",[e._v("second phase")]),e._v(" will be a service to store the records safely in the cloud.")]),n("p",[e._v("The "),n("b",[e._v("third phase")]),e._v(" will be a native android application.")])])}],D={},$=Object(p["a"])(D,A,E,!1,null,null,null),P=$.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"home"},[n("balance-summary"),n("account-list"),n("chart-container"),n("expense-filters"),n("expense-list"),n("footer",{staticClass:"text-center py-2 border-t-2 border-grey-900"},[n("p",[e._v(" "+e._s(e.NAME)+" "),n("strong",[e._v("v"+e._s(e.VERSION))])])])],1)},F=[],I=n("c232"),N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"account-list"},[e._l(e.accounts,(function(e){return n("account-card",{key:e.key,attrs:{account:e}})})),n("div",{staticClass:"account-link"},[n("router-link",{attrs:{to:"/account/new"}},[n("fa",{attrs:{icon:"plus"}}),e._v(" Add account ")],1)],1)],2)},R=[],L=n("5530"),T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"account-card card",style:e.accountStyle},[n("header",{staticClass:"m-0"},[n("span",{staticClass:"card-name"},[e._v(e._s(e.account.name))]),n("span",{staticClass:"card-actions"},[n("fa",{staticClass:"right floated text-small mr-1 text-white",attrs:{icon:["fas","trash"]},on:{click:function(t){return e.deleteAccountProxy(e.account)}}}),n("router-link",{attrs:{to:"/account/"+e.account.key}},[n("fa",{staticClass:"right floated text-small mr-3 text-white",attrs:{icon:["fas","edit"]}})],1)],1)]),n("section",{staticClass:"m-0 p-0"},[n("h3",{staticClass:"balance"},[e._v(e._s(e._f("currency")(e.account.balance)))])]),n("footer",{staticClass:"m-0 text-smaller text-right"},[n("span",{staticClass:"pointer",on:{click:function(t){return e.toggleIncludeAccount(e.account.id)}}},[n("fa",{staticClass:"right floated mt-1 ml-1 text-small",attrs:{icon:["far",(e.account.includeInSummary?"check-":"")+"square"]}}),e._v(" Include in balance? ")],1)])])},Y=[],q=(n("99af"),{props:{account:{required:!0,type:Object}},computed:{accountStyle:function(){var e=this.account?this.account.color:"transparent",t=this.account?"#eee":"inherit",n={"background-color":e,color:t},a="";for(var r in n)a+="".concat(r,": ").concat(n[r],";");return a}},methods:Object(L["a"])(Object(L["a"])({},Object(r["b"])("accounts",["editAccount","deleteAccount","toggleIncludeAccount"])),{},{deleteAccountProxy:function(e){window.confirm("Are you sure?")&&this.deleteAccount(e)}})}),B=q,W=(n("8000"),Object(p["a"])(B,T,Y,!1,null,null,null)),K=W.exports,V={components:{AccountCard:K},methods:Object(L["a"])({},Object(r["b"])("accounts",["editAccount","deleteAccount"])),computed:Object(L["a"])({},Object(r["d"])("accounts",["accounts"]))},H=V,U=(n("84b4"),Object(p["a"])(H,N,R,!1,null,null,null)),G=U.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"balance-summary text-right m-3"},[n("p",{class:e.cssClasses},[n("span",{staticClass:"inline-block mb-1 hidden"},[e._v("Balance:")]),n("span",{staticClass:"text-xxlarge"},[e._v(e._s(e._f("currency")(e.totalBalance)))])]),n("p",{staticClass:"balance-summary__goal"},[e._v(" Goal: "),n("span",{staticClass:"text-large"},[e._v(e._s(e._f("currency")(e.goal)))])]),n("span",[e._v("Week:")]),n("span",{staticClass:"font-medium"},[e._v(e._s(e._f("currency")(e.expensesPastWeek)))]),n("br"),n("span",[e._v("Month:")]),n("span",{staticClass:"font-medium"},[e._v(e._s(e._f("currency")(e.expensesPastMonth)))]),n("br"),n("router-link",{staticClass:"text-small rounded inline-block py-1 px-3 m-2",attrs:{to:"/preference/goal"}},[e._v(" Edit goal "),n("fa",{staticClass:"text-small",attrs:{icon:["fas","pen"]}})],1)],1)},z=[],X=n("ade3"),Z={name:"BalanceSummary",computed:Object(L["a"])(Object(L["a"])(Object(L["a"])(Object(L["a"])(Object(L["a"])({},Object(r["c"])(["balanceSummary"])),Object(r["c"])("accounts",["totalBalance"])),Object(r["c"])("expenses",["expensesPastWeek","expensesPastMonth"])),Object(r["d"])("preferences",["preferences"])),{},{cssClasses:function(){var e,t="black";return this.goal>0&&(t=this.balanceSummary>.8*this.goal?"green":this.balanceSummary>.5*this.goal?"orange":"red"),e={},Object(X["a"])(e,t,!0),Object(X["a"])(e,"balance-summary__total",!0),e},goal:function(){return this.preferences.goal||0}})},Q=Z,ee=(n("83b7"),Object(p["a"])(Q,J,z,!1,null,null,null)),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("aside",{staticClass:"chart-container"},[n("header",{staticClass:"mt-3 mb-1 flex flex-row flex-no-wrap justify-center"},[n("button",{staticClass:"btn mx-2 px-3 py-1",on:{click:function(t){e.periodicity="week"}}},[e._v("weekly")]),n("button",{staticClass:"btn mx-2 px-3 py-1",on:{click:function(t){e.periodicity="month"}}},[e._v("monthly")])]),"xy"===e.chart&&e.expenses.length>0?n("xy-chart",{attrs:{data:e.data,title:e.periodicity+"ly summary",xLabel:e.periodicity,options:e.xkcdOptions,yLabel:"$ Money"}}):e._e(),n("footer",{staticClass:"text-center px-3"},[n("label",[e._v(" Cumulative? "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.cumulative,expression:"cumulative"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.cumulative)?e._i(e.cumulative,null)>-1:e.cumulative},on:{change:function(t){var n=e.cumulative,a=t.target,r=!!a.checked;if(Array.isArray(n)){var o=null,c=e._i(n,o);a.checked?c<0&&(e.cumulative=n.concat([o])):c>-1&&(e.cumulative=n.slice(0,c).concat(n.slice(c+1)))}else e.cumulative=r}}})])])],1)},ae=[],re=(n("c975"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{ref:"svg",staticClass:"xy-chart"})}),oe=[],ce=n("a082"),se=n.n(ce),ie={timeFormat:"MMM",showLine:!0},ue={name:"XYChart",props:{data:{type:Object,required:!0},options:{type:Object,default:function(){return new Object}},title:{type:String,default:""},xLabel:{type:String,default:""},yLabel:{type:String,default:""}},data:function(){return{chart:null}},computed:{config:function(){return{data:this.data,options:Object.assign(ie,this.options),title:this.title,xLabel:this.xLabel,yLabel:this.yLabel}}},watch:{data:function(){this.chart=new se.a.XY(this.$refs.svg,this.config)}},mounted:function(){this.chart=new se.a.XY(this.$refs.svg,this.config)}},le=ue,fe=Object(p["a"])(le,re,oe,!1,null,null,null),de=fe.exports,pe={week:"ddd DD MMM, YYYY",month:"MMM"},me={name:"ChartContainer",components:{"xy-chart":de},data:function(){return{chart:"xy",cumulative:!0,periodicity:"week"}},computed:{expenses:function(){return this.$store.state.expenses.expenses},xkcdOptions:function(){return{timeFormat:pe[this.periodicity]}},data:function(){var e=null,t=0,n=0,a={income:0,outcome:0},r=null,o={},c={},s={label:"Income",data:[]},i={label:"Outcome",data:[]},u=[];for(t=0;t<this.expenses.length;++t)e=this.expenses[t],n=Math.abs(e.price),r=dayjs(e.date).endOf(this.periodicity).format("YYYY-MM-DD"),-1===u.indexOf(r)&&u.push(r),o[r]||(o[r]=0),c[r]||(c[r]=0),e.price<0?c[r]+=n:o[r]+=n;u.sort(),a={income:0,outcome:0};for(var l=0,f=u;l<f.length;l++)r=f[l],s.data.push({x:r,y:o[r]+a.income}),i.data.push({x:r,y:c[r]+a.outcome}),this.cumulative&&(a.income+=o[r],a.outcome+=c[r]);return{datasets:[i,s]}}}},he=me,ye=(n("5da6"),Object(p["a"])(he,ne,ae,!1,null,null,null)),ge=ye.exports,be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"expenses-list"},[n("header",{staticClass:"text-right mb-3 mx-4 text-small"},[n("span",{staticClass:"text font-medium green"},[e._v("Income")]),e._v(": "+e._s(e._f("currency")(e.income))+", "),n("span",{staticClass:"text font-medium red"},[e._v("Outcome")]),e._v(": "+e._s(e._f("currency")(e.outcome))),n("br"),n("span",{staticClass:"text font-medium"},[e._v("Total")]),e._v(": "+e._s(e._f("currency")(e.expensesSum))+" ")]),0===e.expenses.length?n("h2",{staticClass:"text-center"},[e._v(" Move along, nothing to show here. Try changing the filters! ")]):e._e(),e._l(e.expenses,(function(t,a){return a<e.upTo?n("article",{key:t.id,staticClass:"expense-entry",style:e.entryStyles(t)},[n("div",{staticClass:"flex flex-row justify-between align-start w-full"},[n("category-label",{attrs:{category:{category:t.category,subcategory:t.subcategory}}}),n("div",{staticClass:"flex flex-col justify-between text-center"},[n("div",{staticClass:"text-large"},[e._v(" "+e._s(e._f("currency")(t.price))+" ")]),n("div",[n("account-label",{staticClass:"inline-block text-small",attrs:{"account-key":t.account}})],1)])],1),n("div",{staticClass:"w-full flex flex-row items-center justify-between mt-2"},[n("div",{staticClass:"text-small min-w-1/5"},[n("date-label",{attrs:{date:t.date}})],1),n("p",{staticClass:"px-2 text-small"},[e._v(e._s(t.description))]),n("div",{staticClass:"actions text-center min-w-1/5"},[n("router-link",{staticClass:"text-small",attrs:{to:"/expense/"+t.id}},[e._v(" Edit "),n("fa",{attrs:{icon:["fas","pen"]}})],1),n("span",{staticClass:"text-small text-red-500 pointer whitespace-no-wrap",on:{click:function(n){return e.deleteProxy(t.id)}}},[e._v(" Delete "),n("fa",{attrs:{icon:["fas","trash"]}})],1)],1)])]):e._e()})),n("footer",{staticClass:"text-center my-4"},[e.expenses.length>e.upTo?n("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){e.upTo+=20}}},[e._v(" Show more ")]):e._e()])],2)},ve=[],xe=(n("d81d"),n("13d5"),n("4160"),n("159b"),n("b85c")),ke=n("e418"),_e=n.n(ke);c.a.extend(_e.a);var we=function(e,t){var n=null,a=!0;for(var r in t){switch(n=t[r],n.op){case"<":a=e[n.field]<n.value;break;case"<=":a=e[n.field]<=n.value;break;case">":a=e[n.field]>n.value;break;case">=":a=e[n.field]>=n.value;break;case"==":a=e[n.field]==n.value;break;case"===":a=e[n.field]===n.value;break;default:a=!0}if(!a)return!1}return a},Ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"week",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=c()().endOf("day"),o=c()().subtract(t,n).startOf("day"),s=[];a.decreasing=a.decreasing||!0;var i,u=Object(xe["a"])(e);try{for(u.s();!(i=u.n()).done;){var l=i.value;if(c()(l.date).isBetween(o,r))s.push(l);else if(a.decreasing)break}}catch(f){u.e(f)}finally{u.f()}return 0===s.length?0:s.filter((function(e){return!a.onlyNegative||e.price<0})).map((function(e){return e.price})).reduce((function(e,t){return e+t}))},Oe=function(e){return 0===e.length?0:e.map((function(e){return e.price})).reduce((function(e,t){return e+t}))},je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.innerAccount?n("span",{staticClass:"account-label",style:e.accountStyle},[e._v(" "+e._s(e.accountName)+" ")]):e._e()},Se=[],Ae={props:{account:{type:Object,required:!1,default:null},accountKey:{type:String,required:!1,default:null}},data:function(){return{innerAccount:null}},computed:Object(L["a"])(Object(L["a"])({},Object(r["d"])("accounts",["cache"])),{},{accountName:function(){return null!=this.innerAccount?this.innerAccount.name:this.accountKey},accountStyle:function(){var e=this.innerAccount?this.innerAccount.color:"transparent",t={"padding-left":"3px","border-left":"4px solid ".concat(e)},n="";for(var a in t)n+="".concat(a,": ").concat(t[a],";");return n}}),mounted:function(){this.account?this.innerAccount=this.account:this.accountKey&&(this.innerAccount=this.cache[this.accountKey])}},Ee=Ae,De=Object(p["a"])(Ee,je,Se,!1,null,null,null),$e=De.exports,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"category-label flex"},[n("figure",{style:e.figureStyles},[n("fa",{attrs:{icon:e.getIcon(e.category.subcategory,!0)}})],1),n("div",{staticClass:"flex flex-col justify-start pl-1"},[n("span",{staticClass:"text-small leading-tight mb-1"},[e._v(" "+e._s(e.getName(e.category.subcategory,!0))+", ")]),n("br"),n("span",{staticClass:"text-xsmall leading-tight"},[e._v(" "+e._s(e.getName(e.category.category))+" ")])])])},Me=[],Fe=(n("ac1f"),n("5319"),{props:{category:{required:!0,type:Object}},computed:Object(L["a"])(Object(L["a"])({},Object(r["d"])("categories",["cache"])),{},{color:function(){var e=this.cache[this.category.subcategory],t=null;return e||(e=this.cache[this.category.category]),t=e&&e.color?e.color:"#aaa",t},figureStyles:function(){var e={"background-color":this.color,color:"#eee"},t="";for(var n in e)t+="".concat(n,": ").concat(e[n],";");return t}}),methods:{getName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.cache[e];return t?t.name:e.replace(/^\w/,e.charAt(0).toUpperCase()).replace(/_/g," ")},getIcon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.cache[e],n=["fas"];return t?n.push(t.icon):n.push("dollar-sign"),n}}}),Ie=Fe,Ne=(n("46cb"),Object(p["a"])(Ie,Pe,Me,!1,null,null,null)),Re=Ne.exports,Le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"date-label",on:{click:e.toggleFormat}},["ago"===e.format?n("span",[e._v(" "+e._s(e._f("ago")(e.date))+" ")]):n("span",[e._v(" "+e._s(e._f("format")(e.date,"HH:mm MMM D, YYYY"))+" ")])])},Te=[],Ye={props:{date:{required:!0}},data:function(){return{format:"ago"}},methods:{toggleFormat:function(e){"ago"===this.format?this.format="raw":this.format="ago"}}},qe=Ye,Be=Object(p["a"])(qe,Le,Te,!1,null,null,null),We=Be.exports,Ke={name:"ExpenseList",props:{},components:{AccountLabel:$e,CategoryLabel:Re,DateLabel:We},data:function(){return{upTo:20}},methods:Object(L["a"])(Object(L["a"])({},Object(r["b"])("expenses",["editExpense","deleteExpense"])),{},{entryStyles:function(e){var t={},n=this.categoriesCache[e.subcategory],a="";for(var r in n||(n=this.categoriesCache[this.category]),n&&(t["border-left"]="5px solid ".concat(n.color)),t)a+="".concat(r,": ").concat(t[r],";");return a},deleteProxy:function(e){window.confirm("Are you sure?")&&this.deleteExpense(e)}}),computed:Object(L["a"])(Object(L["a"])(Object(L["a"])(Object(L["a"])({},Object(r["d"])("expenses",["expenses"])),Object(r["d"])("categories",{categoriesCache:"cache"})),Object(r["c"])("expenses",["totalExpenses"])),{},{expensesSum:function(){return Oe(this.expenses)},income:function(){return this.expenses.filter((function(e){return e.price>0})).map((function(e){return e.price})).concat([0]).reduce((function(e,t){return e+t}))},outcome:function(){return this.expenses.filter((function(e){return e.price<0})).map((function(e){return e.price})).concat([0]).reduce((function(e,t){return e+t}))}}),created:function(){}},Ve=Ke,He=(n("59e7"),Object(p["a"])(Ve,be,ve,!1,null,null,null)),Ue=He.exports,Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("details",{staticClass:"expense-filters"},[n("summary",[n("strong",[e._v("Filters")]),e._v(": "+e._s(e.filtersSummary)+" ")]),n("form",{staticClass:"expense-filters-form w-full mt-4",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.filterExpenses(t)}}},[n("div",{staticClass:"flex flex-row flex-no-wrap"},[n("div",{staticClass:"w-1/2 pr-2"},[n("label",{attrs:{for:"startDate"}},[e._v("Start date")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.startDate,expression:"startDate"}],attrs:{type:"date",id:"startDate",placeholder:"Start date"},domProps:{value:e.startDate},on:{input:function(t){t.target.composing||(e.startDate=t.target.value)}}})]),n("div",{staticClass:"w-1/2 pl-2"},[n("label",{attrs:{for:"date"}},[e._v("End date")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.endDate,expression:"endDate"}],attrs:{type:"date",placeholder:"End date"},domProps:{value:e.endDate},on:{input:function(t){t.target.composing||(e.endDate=t.target.value)}}})])]),n("fieldset",[n("legend",[e._v("Price")]),n("label",{staticClass:"block w-1/2",attrs:{for:"comparator"}},[n("span",{attrs:{hidden:""}},[e._v("Price Comparator")]),n("dropdown",{attrs:{options:e.comparatorOptions,placeholder:"Price Comparator"},model:{value:e.comparator,callback:function(t){e.comparator=t},expression:"comparator"}})],1),n("label",{staticClass:"block w-1/2",attrs:{for:"price"}},[n("span",{attrs:{hidden:""}},[e._v("Price")]),n("money-input",{attrs:{id:"price",name:"price",value:e.price},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}})],1)]),n("div",{staticClass:"w-full"},[n("label",{attrs:{for:"category"}},[e._v("Category")]),n("dropdown",{attrs:{placeholder:"Category",fluid:"",selection:"",options:e.categoryOptions},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}})],1),n("footer",{staticClass:"actions text-right mt-4"},[n("button",{staticClass:"btn",attrs:{type:"reset"},on:{click:e.resetFilters}},[e._v("Reset")]),n("button",{staticClass:"btn ml-4",attrs:{type:"submit"}},[e._v("Filter")])])])])},Je=[],ze=(n("a15b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dropdown relative"},[n("select",{staticClass:"block appearance-none w-full bg-gray-100 border border-gray-500 p-2 rounded focus:outline-none focus:bg-white focus:border-gray-600",attrs:{placeholder:e.placeholder},on:{input:function(t){return e.$emit("input",t.target.value)}}},e._l(e.options,(function(t,a){return n("option",{key:a,domProps:{value:t.value}},[e._v(" "+e._s(t.text)+" ")])})),0),n("div",{staticClass:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2"},[n("fa",{attrs:{icon:"caret-down"}})],1)])}),Xe=[],Ze={name:"Dropdown",props:{options:{type:Array,required:!0},placeholder:{type:String,default:"Select an option"}}},Qe=Ze,et=Object(p["a"])(Qe,ze,Xe,!1,null,null,null),tt=et.exports,nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"money-input w-full"},[n("span",{class:{sign:!0,positive:e.sign>0,negative:e.sign<0},on:{click:e.emitSign}},[e._v(e._s(e.sign>0?"+":"-"))]),n("money",e._b({attrs:{value:e.money},on:{input:function(t){return e.emitValue(t)}}},"money",e.moneyConf,!1))],1)},at=[],rt=(n("a9e3"),n("716b")),ot={components:{Money:rt["Money"]},props:{value:{type:Number,required:!0,default:0}},data:function(){return{moneyConf:{prefix:"$",precision:2,masked:!1},money:0,sign:-1}},methods:{emitValue:function(e){0!=e?(this.$emit("input",e*this.sign),this.money=e):this.$emit("input",0)},emitSign:function(){this.sign=-1*this.sign,this.emitValue(this.money)}},created:function(){this.money=Math.abs(this.value),this.sign=this.value>0?1:-1}},ct=ot,st=(n("f044"),Object(p["a"])(ct,nt,at,!1,null,null,null)),it=st.exports,ut={name:"ExpenseFilters",components:{Dropdown:tt,MoneyInput:it},props:{},data:function(){return{startDate:null,endDate:null,category:null,comparator:">=",price:0,comparatorOptions:[{text:"Up to (<=)",value:"<="},{text:"At least (>=)",value:">="}]}},methods:{filterExpenses:function(){var e=[];this.startDate&&e.push({field:"date",op:">=",value:c()(this.startDate).startOf("day")}),this.endDate&&e.push({field:"date",op:"<=",value:c()(this.endDate).endOf("day")}),this.price&&e.push({field:"price",op:"<="===this.comparator?"<=":">=",value:this.price}),this.category&&e.push({field:"category",op:"===",value:this.category}),this.$store.dispatch("expenses/setFilters",e)},resetFilters:function(){this.startDate=this.endDate=this.category=null,this.comparator=">=",this.price=0,this.$store.dispatch("expenses/setFilters",[])}},computed:Object(L["a"])(Object(L["a"])(Object(L["a"])({},Object(r["c"])("categories",["categoryOptions"])),Object(r["d"])("expenses",["filters"])),{},{filtersSummary:function(){var e,t=[],n=null,a=Object(xe["a"])(this.filters);try{for(a.s();!(e=a.n()).done;){var r=e.value;n="".concat(r.field," ").concat(r.op," "),"date"===r.field?n+=c()(r.value).format("MMM D YYYY"):n+=r.value,t.push(n)}}catch(o){a.e(o)}finally{a.f()}return 0==t.length?"show all":t.join(", ")}})},lt=ut,ft=(n("d25e"),Object(p["a"])(lt,Ge,Je,!1,null,"d0f3b980",null)),dt=ft.exports,pt={name:"Home",components:{AccountList:G,BalanceSummary:te,ChartContainer:ge,ExpenseList:Ue,ExpenseFilters:dt},computed:{NAME:function(){return I["NAME"]},VERSION:function(){return I["VERSION"]}}},mt=pt,ht=Object(p["a"])(mt,M,F,!1,null,null,null),yt=ht.exports,gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"import-export m-4"},[n("article",{staticClass:"card"},[e._m(0),n("section",[n("p",[e._v("Select an exported file and import it")]),n("input",{ref:"importFile",attrs:{name:"importFile",type:"file",accept:"*"},on:{change:e.handleFile}})]),n("footer",{staticClass:"text-white justify-center bg-green-500 border border-green-600"},[n("button",{attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.readData(t)}}},[n("fa",{attrs:{icon:["fas","upload"]}}),e._v(" Upload ")],1)])]),n("article",{staticClass:"card"},[e._m(1),e._m(2),n("footer",{staticClass:"justify-center text-white bg-blue-500 border border-blue-600"},[n("button",{staticClass:"mr-4",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.exportData()}}},[n("fa",{attrs:{icon:["fas","download"]}}),e._v(" As .json ")],1),n("button",{attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.exportData("txt")}}},[n("fa",{attrs:{icon:["fas","download"]}}),e._v(" As .txt ")],1)])]),n("article",{staticClass:"card"},[e._m(3),e._m(4),n("footer",{staticClass:"justify-center text-white bg-yellow-500 border border-yellow-600"},[n("button",{attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.seedData(t)}}},[n("fa",{attrs:{icon:["fas","cogs"]}}),e._v(" Seed ")],1)])]),n("article",{staticClass:"card"},[e._m(5),e._m(6),n("footer",{staticClass:"justify-center text-white bg-red-500 border border-red-600"},[n("button",{attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.deleteData(t)}}},[n("fa",{attrs:{icon:["fas","trash"]}}),e._v(" Destroy ")],1)])])])},bt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("h2",[e._v("Import")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"card-header"},[n("h2",[e._v("Export")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"card-body"},[n("ul",[n("li",[e._v("Accounts")]),n("li",[e._v("Expenses")])]),n("details",[n("summary",[e._v(" If you're having trouble exporting as "),n("code",[e._v(".json")]),e._v(", export the data as a "),n("code",[e._v(".txt")]),e._v(" file, it will still be in JSON format, just diferent extension. ")]),n("p",[e._v(" Some mobile browsers will not let you download "),n("code",[e._v(".json")]),e._v(" files for security reasons. ")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("h2",[e._v("Seed")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("p",[e._v("Seed test data to see how it works")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("h2",[e._v("Destroy")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("p",[e._v(" Destroy "),n("strong",[e._v("all")]),e._v(" local data — export first if unsure ")])])}],vt={methods:Object(L["a"])(Object(L["a"])({},Object(r["b"])(["deleteData","exportData","importData","seedData"])),{},{handleFile:function(){this.$refs.importFile.files.length>0&&this.readData()},readData:function(){var e=this;if(this.$refs.importFile.files.length>0){var t=new FileReader;t.addEventListener("load",(function(t){var n=JSON.parse(t.target.result);e.importData(n)})),t.readAsBinaryString(this.$refs.importFile.files.item(0))}}})},xt=vt,kt=Object(p["a"])(xt,gt,bt,!1,null,null,null),_t=kt.exports,wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"account-form px-2 py-4",attrs:{name:"account"},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.submitAccount(t)}}},[e.loaded?n("div",{staticClass:"w-full mb-4"},[n("label",{staticClass:"block font-semibold mb-3",style:e.accountStyles,attrs:{for:"account_balance"}},[e._v(" Balance ")]),n("money-input",{attrs:{id:"account_balance",name:"account_balance",placeholder:"Balance",required:"",value:e.balance},model:{value:e.balance,callback:function(t){e.balance=t},expression:"balance"}})],1):e._e(),n("div",{staticClass:"w-full mb-4"},[n("label",{staticClass:"block font-semibold mb-3",style:e.accountStyles,attrs:{for:"account_name"}},[e._v(" Name ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"block appearance-none w-full bg-gray-100 border border-gray-500 p-2 rounded focus:outline-none focus:bg-white focus:border-gray-600",style:e.accountStyles,attrs:{id:"account_name",name:"account_name",placeholder:"Name",minlength:"1",pattern:".+",required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),n("div",{staticClass:"w-full"},[n("label",{staticClass:"block font-semibold",attrs:{for:"account_color"}},[e._v("Color")]),n("div",{staticClass:"mt-2"},[n("v-swatches",{attrs:{inline:"",swatches:e.colorList},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}})],1)]),e._m(0)])},Ct=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"actions text-right"},[n("button",{attrs:{type:"submit"}},[e._v("Save")])])}],Ot=(n("7db0"),n("7f75")),jt=n.n(Ot),St=n("5e06"),At=n.n(St),Et={name:"AccountForm",components:{MoneyInput:it,VSwatches:jt.a},data:function(){return{balance:0,color:St["primary"],key:null,loaded:!1,name:null}},methods:{submitAccount:function(){var e=this,t={balance:this.balance,color:this.color,key:this.key,name:this.name};document.forms.account.checkValidity()?this.$store.dispatch("accounts/submitAccount",t).then((function(t){t?e.$router.push("/"):console.error("something went wrong")})).catch((function(e){console.error("submitAccount:",e,e.stack)})):(document.forms.account.reportValidity(),console.error("submitAccount: invalid data"))},loadForm:function(e){var t=this.accounts.find((function(t){return t.key==e}));t&&(this.balance=t.balance,this.color=t.color,this.key=t.key,this.name=t.name)}},computed:Object(L["a"])(Object(L["a"])({},Object(r["d"])("accounts",["accounts"])),{},{action:function(){return this.key?"Update":"Add"},colorList:function(){return St["colors"]},accountStyles:function(){return{"border-bottom-color":"".concat(this.color," !important"),color:this.color||"initial"}}}),created:function(){var e=this.$route.params.account_key;e&&"new"!=e&&this.loadForm(e),this.loaded=!0}},Dt=Et,$t=(n("ec42"),Object(p["a"])(Dt,wt,Ct,!1,null,null,null)),Pt=$t.exports,Mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"expense-form w-full p-2",attrs:{name:"expense"},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.submitExpense(t)}}},[n("div",{staticClass:"w-full"},[n("label",{staticClass:"hidden",attrs:{hidden:"",for:"amount"}},[e._v("Amount")]),n("money-input",{attrs:{value:e.price},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}}),e._l(e.expenseErrors.price,(function(t,a){return n("p",{key:a,staticClass:"red text"},[e._v(" "+e._s(t)+" ")])}))],2),n("div",{staticClass:"w-full"},[n("label",{staticClass:"block font-semibold mb-1",attrs:{for:"date"}},[e._v("Date")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.date,expression:"date"}],staticClass:"w-full",attrs:{type:"date"},domProps:{value:e.date},on:{input:function(t){t.target.composing||(e.date=t.target.value)}}}),e._l(e.expenseErrors.date,(function(t,a){return n("p",{key:a,staticClass:"red text"},[e._v(" "+e._s(t)+" ")])}))],2),n("div",{staticClass:"flex flex-row flex-no-wrap mb-4"}),n("div",{staticClass:"flex flex-row flex-no-wrap mb-4"},[n("div",{staticClass:"w-1/2 pr-1"},[n("label",{staticClass:"block font-semibold mb-1",attrs:{for:"category"}},[e._v("Category")]),n("category-picker",{staticClass:"w-full",attrs:{options:e.categories,category:e.category},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}}),e._l(e.expenseErrors.category,(function(t,a){return n("p",{key:a,staticClass:"red text"},[e._v(" "+e._s(t)+" ")])}))],2),n("div",{staticClass:"w-1/2 pl-1"},[n("label",{staticClass:"block font-semibold mb-1",attrs:{for:"subcategory"}},[e._v(" Subcategory ")]),n("category-picker",{staticClass:"w-full",attrs:{disabled:!e.category.key,options:e.subcategoryOptions,category:e.subcategory},model:{value:e.subcategory,callback:function(t){e.subcategory=t},expression:"subcategory"}}),e._l(e.expenseErrors.subcategory,(function(t,a){return n("p",{key:a,staticClass:"red text"},[e._v(" "+e._s(t)+" ")])}))],2)]),n("div",{staticClass:"w-full"},[n("label",{staticClass:"block font-semibold",attrs:{for:"account"}},[e._v("Account")]),n("accounts-options",{attrs:{account:e.account},on:{input:function(t){e.account=t}}}),e._l(e.expenseErrors.account,(function(t,a){return n("p",{key:a,staticClass:"red text"},[e._v(" "+e._s(t)+" ")])}))],2),n("div",{staticClass:"w-full"},[n("label",{staticClass:"block font-semibold mb-1",attrs:{for:"description"}},[e._v("Description")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],attrs:{name:"description"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),e._l(e.expenseErrors.description,(function(t,a){return n("p",{key:a,staticClass:"red text"},[e._v(" "+e._s(t)+" ")])}))],2),n("footer",{staticClass:"text-right w-full mt-4"},[n("button",{staticClass:"btn-submit",attrs:{type:"submit"}},[e._v(e._s(e.action))])])])},Ft=[],It=(n("a4d3"),n("e01a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"accounts-options"},e._l(e.filteredAccounts,(function(t){return n("button",{key:t.id,staticClass:"account-option",style:e.accountButtonStyles(t),attrs:{type:"button"},on:{click:function(n){return e.$emit("input",t.key)}}},[e._v(" "+e._s(t.name)+" ")])})),0)}),Nt=[],Rt={name:"AccountsOptions",props:{account:{type:String,required:!1,default:null},exclude:{type:Array,required:!1,default:function(){return[]}}},methods:{accountButtonStyles:function(e){var t={"background-color":e.color,color:"white"};return this.account===e.key&&(t["transform"]="scale(1.1)",t["box-shadow"]="0 0 0.5rem ".concat(e.color)),t}},computed:Object(L["a"])(Object(L["a"])({},Object(r["d"])("accounts",["accounts"])),{},{filteredAccounts:function(){var e=this;return this.accounts.filter((function(t){return-1===e.exclude.indexOf(t.key)}))}})},Lt=Rt,Tt=(n("0f81"),Object(p["a"])(Lt,It,Nt,!1,null,null,null)),Yt=Tt.exports,qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"category-picker relative"},[n("button",{staticClass:"w-full btn rounded text-white flex flex-col flex-no-wrap justify-center items-center p-2",style:e.buttonStyles,attrs:{type:"button",disabled:e.disabled},on:{click:function(t){e.open=!e.open}}},[n("div",[n("fa",{attrs:{icon:["fas",e.category.icon]}})],1),e.category.name?n("div",[e._v(e._s(e.category.name))]):n("div",{staticClass:"min-w-1/3 border-b-2"})]),e.open?n("div",{staticClass:"w-full flex flex-row flex-wrap bg-white absolute origin-top-right rounded-md shadow-xl z-10 border border-gray-600"},e._l(e.options,(function(t,a){return n("div",{key:a,staticClass:"category-option text-white rounded m-1 border border-gray-400 pointer p-2 shadow-2xl",style:"background:"+(t.color||"var(--default-color-dark, #666)"),on:{click:function(n){e.$emit("input",t),e.open=!1}}},[n("fa",{attrs:{icon:["fas",t.icon]}}),e._v(" "+e._s(t.name)+" ")],1)})),0):e._e()])},Bt=[],Wt={name:"CategoryPicker",props:{options:{type:Array,required:!0},category:{type:Object,required:!0},disabled:{type:Boolean,required:!1,default:!1}},data:function(){return{open:!1}},computed:{buttonStyles:function(){return{"background-color":this.category.color}}}},Kt=Wt,Vt=(n("e5b8"),Object(p["a"])(Kt,qt,Bt,!1,null,null,null)),Ht=Vt.exports,Ut={name:"ExpenseForm",components:{AccountsOptions:Yt,CategoryPicker:Ht,MoneyInput:it},data:function(){return{description:null,price:0,date:new Date,category:{},subcategory:{},account:"cash",loaded:!1}},computed:Object(L["a"])(Object(L["a"])(Object(L["a"])(Object(L["a"])({},Object(r["c"])("categories",["categorySubcategories","otherCategory"])),Object(r["d"])("categories",["categories","subcategories"])),Object(r["d"])("expenses",["expenses","expenseErrors"])),{},{expenseId:function(){var e=null;try{e=this.$route.params.expense_id,"new"==e&&(e=null)}catch(t){}return e},subcategoryOptions:function(){return this.categorySubcategories(this.category.key)},action:function(){return this.id?"Update":"Save"}}),methods:{submitExpense:function(){var e=this,t={id:this.expenseId,description:this.description,price:this.price,date:this.date,category:this.category.key,subcategory:this.subcategory.key,account:this.account};this.$store.dispatch("expenses/submitExpense",t).then((function(t){t?e.$router.push("/"):console.error("something went wrong")})).catch((function(e){console.error("expenseForm:",e,e.stack)}))},loadForm:function(e){var t=this.expenses.find((function(t){return t.id==e}));t&&(this.description=t.description,this.price=t.price,this.date=t.date,this.account=t.account,this.category=this.categories.find((function(e){return e.key==t.category})),this.subcategory=this.subcategories.find((function(e){return e.key==t.subcategory})))}},created:function(){var e=this.$route.params.expense_id;e&&"new"!=e?this.loadForm(e):(this.category=this.otherCategory.category,this.subcategory=this.otherCategory.subcategory),this.loaded=!0}},Gt=Ut,Jt=(n("5892"),Object(p["a"])(Gt,Mt,Ft,!1,null,null,null)),zt=Jt.exports,Xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"category-form p-3",attrs:{name:"category"},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.submitForm(t)}}},[n("section",{staticClass:"category-options"},[n("div",{staticClass:"w-full mb-4"},[n("label",{staticClass:"block font-medium"},[e._v("Category")]),n("div",{staticClass:"flex flex-row"},[n("category-picker",{staticClass:"w-full",attrs:{options:e.categoryOptions,category:e.category},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}}),n("transition",{attrs:{name:"sweep-left"}},[e.categoryDeletable?n("delete-category-button",{staticClass:"ml-2 w-1/5",attrs:{category:e.category},on:{deleted:e.resetCategory}}):e._e()],1)],1)]),n("div",{staticClass:"w-full mb-4"},[n("label",{staticClass:"block font-medium"},[e._v("Subcategory")]),n("div",{staticClass:"flex flex-row"},[n("category-picker",{staticClass:"w-full",attrs:{disabled:!e.category.name,options:e.subcategoryOptions,category:e.subcategory},model:{value:e.subcategory,callback:function(t){e.subcategory=t},expression:"subcategory"}}),n("transition",{attrs:{name:"sweep-left"}},[e.subcategoryDeletable?n("delete-category-button",{staticClass:"ml-2 w-1/5",attrs:{category:e.subcategory},on:{deleted:e.resetSubcategory}}):e._e()],1)],1)])]),n("article",{staticClass:"category-preview card pt-0 pb-6",style:e.previewStyle},[n("header",{staticClass:"justify-end m-0 mt-2 mr-4 p-0"},[n("color-picker-modal",{staticClass:"inline-block",on:{input:function(t){return e.setColor(t)}}})],1),n("section",{staticClass:"icon-cat-subcat"},[n("icon-picker-modal",{attrs:{icon:e.category.icon},model:{value:e.category.icon,callback:function(t){e.$set(e.category,"icon",t)},expression:"category.icon"}}),n("div",{staticClass:"cat-subcat"},[n("div",{staticClass:"cat mb-4"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.category.name,expression:"category.name"}],ref:"categoryInput",attrs:{placeholder:"Category"},domProps:{value:e.category.name},on:{input:function(t){t.target.composing||e.$set(e.category,"name",t.target.value)}}})]),n("div",{staticClass:"subcat"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.subcategory.name,expression:"subcategory.name"}],ref:"subcategoryInput",attrs:{placeholder:"Subcategory"},domProps:{value:e.subcategory.name},on:{input:function(t){t.target.composing||e.$set(e.subcategory,"name",t.target.value)}}})])])],1)]),e._m(0)])},Zt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"actions text-right"},[n("button",{attrs:{type:"submit"}},[e._v("Submit")])])}],Qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"color-picker"},[n("div",{staticClass:"toggler",on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.isOpen=!0}}},[n("fa",{attrs:{icon:["fas","eye-dropper"]}})],1),e.isOpen?n("v-modal",{attrs:{title:"Pick a color"},on:{close:function(t){e.isOpen=!1}}},[n("div",[n("v-swatches",{attrs:{inline:"",shapes:"circles",swatches:e.colorList},on:{input:function(t){e.$emit("input",t),e.isOpen=!1}}})],1),n("hr"),n("div",{staticClass:"actions text-right"},[n("button",{staticClass:"text-gray-700 py-2 px-4 hover:underline",attrs:{type:"button"},on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.isOpen=!1}}},[e._v(" Close ")])])]):e._e()],1)},en=[],tn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.open?n("div",{staticClass:"fixed w-full h-full top-0 left-0 flex items-center justify-center z-10"},[n("div",{staticClass:"absolute w-full h-full bg-gray-900 opacity-50",on:{click:e.close}}),n("div",{staticClass:"absolute max-h-full",class:e.maxWidth},[n("div",{staticClass:"container bg-white overflow-hidden md:rounded"},[n("div",{staticClass:"px-4 py-4 leading-none flex justify-between items-center font-medium text-sm bg-gray-100 border-b select-none"},[n("h3",[e._v(e._s(e.title))]),n("div",{staticClass:"text-2xl hover:text-gray-600 cursor-pointer",on:{click:e.close}},[e._v(" × ")])]),n("div",{staticClass:"max-h-full px-4 py-4"},[e._t("default")],2)])])]):e._e()},nn=[],an={data:function(){return{open:!0}},props:{title:{type:String,default:""},header:{type:String,required:!1,default:""},width:{type:String,default:"full",validator:function(e){return-1!==["xs","sm","md","lg","full"].indexOf(e)}}},methods:{close:function(){this.open=!1,this.$emit("close")}},computed:{maxWidth:function(){switch(this.width){case"xs":return"max-w-lg";case"sm":return"max-w-xl";case"md":return"max-w-2xl";case"lg":return"max-w-3xl";case"full":return"max-w-full"}}},mounted:function(){var e=this,t=function(t){"Esc"!==t.key&&"Escape"!==t.key||e.close()};document.addEventListener("keydown",t),this.$once("hook:beforeDestroy",(function(){document.removeEventListener("keydown",t)}))}},rn=an,on=Object(p["a"])(rn,tn,nn,!1,null,null,null),cn=on.exports,sn={components:{VModal:cn,VSwatches:jt.a},data:function(){return{isOpen:!1}},computed:{colorList:function(){return At.a}}},un=sn,ln=(n("f336"),Object(p["a"])(un,Qt,en,!1,null,null,null)),fn=ln.exports,dn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon-picker"},[n("div",{staticClass:"toggler",on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.isOpen=!0}}},[n("fa",{attrs:{icon:e.icon}})],1),e.isOpen?n("v-modal",{attrs:{title:"Pick an icon"},on:{close:function(t){e.isOpen=!1}}},[n("div",{staticClass:"w-full mb-3"},[n("div",{staticClass:"relative"},[n("div",{staticClass:"absolute left-0 inset-y-0 pl-3 flex items-center"},[n("fa",{attrs:{icon:["fas","search"]}})],1),n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"block w-full bg-gray-100 border border-gray-500 rounded p-2 pl-8 focus:outline-none focus:bg-white focus:border-gray-600",attrs:{placeholder:"Search..."},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}})])]),n("div",{staticClass:"icon-list"},e._l(e.iconList,(function(t,a){return e.searchRegEx.test(t[1])?n("div",{key:a,staticClass:"icon-container",on:{click:function(n){e.$emit("input",t[1]),e.isOpen=!1}}},[n("fa",{attrs:{icon:t}}),n("span",{staticClass:"icon-name text-xsmall"},[e._v(e._s(t[1].replace(/-/g," ")))])],1):e._e()})),0),n("div",{staticClass:"actions text-right"},[n("button",{staticClass:"text-gray-700 py-2 px-4 hover:underline",attrs:{type:"button"},on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.isOpen=!1}}},[e._v(" Close ")])])]):e._e()],1)},pn=[],mn=(n("4d63"),n("25f0"),n("841c"),n("c074")),hn={components:{VModal:cn},props:{icon:{type:String,required:!1,default:"dollar"}},data:function(){return{isOpen:!1,search:""}},computed:{iconList:function(){var e=[];for(var t in mn["a"])mn["a"][t].iconName&&e.push(["fas",mn["a"][t].iconName]);return e},searchRegEx:function(){return new RegExp(".*".concat(this.search.toLowerCase(),".*"))}}},yn=hn,gn=(n("6dfe"),Object(p["a"])(yn,dn,pn,!1,null,null,null)),bn=gn.exports,vn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"delete-category-button rounded text-white bg-red-500 border-red-500 py-2 px-3",attrs:{type:"button"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.confirmDelete(t)}}},[n("fa",{attrs:{icon:["fas","trash"]}})],1)},xn=[],kn=(n("96cf"),n("1da1")),_n="Are you sure?",wn={name:"DeleteCategoryButton",props:{category:{type:Object,required:!0}},methods:Object(L["a"])(Object(L["a"])({},Object(r["b"])("categories",["deleteCategory"])),{},{confirmDelete:function(){var e=this;return Object(kn["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n="".concat(_n,"\n\n"),a=0,e.category.isSubcategory||(n+="This will delete all of the related subcategories.\n"),n+="There's no turning back.",!window.confirm(n)){t.next=7;break}return t.next=6,e.deleteCategory(e.category);case 6:a=t.sent;case 7:a>0&&e.$emit("deleted",!0);case 8:case"end":return t.stop()}}),t)})))()}})},Cn=wn,On=Object(p["a"])(Cn,vn,xn,!1,null,null,null),jn=On.exports,Sn=(n("5db7"),n("45fc"),n("73d9"),n("2ca0"),n("74ce")),An=n("9f85"),En=new Sn["a"]("Finances");En.version(1).stores({accounts:"++id,name,balance",expenses:"++id,description,price,qty,tags,date",tags:"++id,name"}),En.version(2).stores({accounts:"++id,name,balance,color"}).upgrade((function(e){var t="#68BC00";return e.accounts.toCollection().modify((function(e){e.color||(e.color=t)}))})),En.version(3).stores({categories:"&key,name,icon,isSubcategory",tags:null}),En.version(4).stores({preferences:"&key,value"}),En.version(5).upgrade((function(e){return e.expenses.toCollection().modify((function(e){e.qty>1&&(e.price=e.price*e.qty),delete e.qty}))})),En.version(6).upgrade((function(e){return e.expenses.toCollection().modify((function(e){e.price=-1*e.price}))})),En.version(7).stores({accounts:"++id,&key,name,balance"}).upgrade(function(){var e=Object(kn["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={},e.next=3,t.accounts.toCollection().modify((function(e){var t=e.name.toLowerCase();n[e.id]=t,e.key=t}));case 3:return e.abrupt("return",t.expenses.toCollection().modify((function(e){n[e.accountId]&&(e.account=n[e.accountId]),delete e.accountId})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var Dn=En,$n=(n("b680"),n("d3b7"),n("4208")),Pn=n.n($n);function Mn(e){return c()(e).fromNow()}function Fn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return c.a.utc(e).local().format(t)}function In(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return c()(e).utc().format(t)}function Nn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return c()(e).format(t)}function Rn(e){var t=(e/1).toFixed(2).replace(",",".");return"$"+t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function Ln(e){var t="",n=null,a=0;for(e=e.toLowerCase(),a=0;a<e.length;++a)n=e.charAt(a),(n>="a"&&n<="z"||n>="0"&&n<="9")&&(t+=n);return t}c.a.extend(Pn.a);var Tn={ago:Mn,utcToLocal:Fn,localToUTC:In,format:Nn,currency:Rn,stringKeyFilter:Ln},Yn={findByKey:function(e){return Object(kn["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",null);case 2:return t.abrupt("return",Dn.categories.get({key:e}).then((function(e){return e})));case 3:case"end":return t.stop()}}),t)})))()},create:function(e){return Object(kn["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.key||(e.key=Ln(e.name)),t.abrupt("return",Dn.categories.add(e));case 2:case"end":return t.stop()}}),t)})))()},findOrCreate:function(e){return Object(kn["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.key||(e.key=Ln(e.name)),t.abrupt("return",Dn.categories.get(e.key).then((function(t){return t||Dn.categories.add(e).then((function(t){return e.key=t,e}))})));case 2:case"end":return t.stop()}}),t)})))()},update:function(e,t){return Object(kn["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",Dn.categories.update(e,t));case 1:case"end":return n.stop()}}),n)})))()},upsert:function(e,t){return Object(kn["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.key||(t.key=e),n.abrupt("return",Dn.categories.get(e).then((function(n){return n?Dn.categories.update(e,t).then((function(e){return t})):Dn.categories.add(t).then((function(e){return t.key=e,t}))})));case 2:case"end":return n.stop()}}),n)})))()},deleteCategory:function(e){return Object(kn["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=0,e.isSubcategory){t.next=7;break}return t.next=4,Dn.categories.where("key").startsWith(e.key).modify({deleted:!0});case 4:n=t.sent,t.next=10;break;case 7:return t.next=9,Dn.categories.get(e.key).then((function(e){if(e)return e.deleted=!0,Dn.categories.update(e.key,e)}));case 9:n=1;case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}}),t)})))()},generateKey:Ln},qn={color:"#455A64",icon:"dollar-sign"},Bn={color:qn.color,icon:qn.icon,key:"other",name:"Other"},Wn={state:{categories:[],subcategories:[],cache:{}},mutations:{addCategory:function(e,t){e.categories.push(t)},addSubcategory:function(e,t){e.subcategories.push(t)},getCategories:function(e){Dn.categories.toArray().then((function(t){var n,a=Object(xe["a"])(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;e.cache[r.key]=r}}catch(o){a.e(o)}finally{a.f()}return t})).then((function(e){return e.filter((function(e){return!e.deleted}))})).then((function(e){return e.filter((function(e){return!e.isSubcategory}))})).then((function(t){return e.categories=t})).catch((function(e){throw console.error("getCategories:",e),e}))},getSubcategories:function(e){Dn.categories.toArray().then((function(e){return e.filter((function(e){return!e.deleted}))})).then((function(e){return e.filter((function(e){return e.isSubcategory}))})).then((function(t){return e.subcategories=t})).catch((function(e){throw console.error("getSubcategories:",e),e}))}},actions:{submitCategory:function(e,t){return Object(kn["a"])(regeneratorRuntime.mark((function n(){var a,r,o,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.dispatch,a=e.commit,e.state,r=null,o=null,c=null,o={key:t.categoryKey,name:t.category,color:t.color,isSubcategory:!1},t.isSubcategory||(o.icon=t.icon),o.key||(o.key=Yn.generateKey(o.name)),n.next=7,Yn.upsert(o.key,o);case 7:if(r=n.sent,!t.isSubcategory){n.next=14;break}return o={key:t.subcategoryKey,name:t.subcategory,color:t.color,icon:t.icon,isSubcategory:!0},o.key||(o.key=Yn.generateKey(o.name),o.key="".concat(r.key,"_").concat(o.key)),n.next=13,Yn.upsert(o.key,o);case 13:c=n.sent;case 14:return Dn.categories.where("key").startsWith(r.key).modify({color:t.color}),a("getCategories"),a("getSubcategories"),n.abrupt("return",t.isSubcategory?c:r);case 18:case"end":return n.stop()}}),n)})))()},deleteCategory:function(e,t){return Object(kn["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,e.state,n.next=3,Yn.deleteCategory(t);case 3:return r=n.sent,console.info("Deleted ".concat(r," categories")),a("getCategories"),a("getSubcategories"),n.abrupt("return",r);case 8:case"end":return n.stop()}}),n)})))()},seedData:function(e){var t=e.commit;Dn.categories.toArray().then((function(e){var t=0,n=0,a=null,r=null,o=null,c=null;for(t=0;t<An.categories.length;++t){for(a=An.categories[t],r=At.a.shift(),e.some((function(e){return e.key==a.key}))||Dn.categories.add({key:a.key,name:a.name,icon:a.icon,isSubcategory:!1,color:r}),n=0;n<a.subcategories.length;++n)o=a.subcategories[n],c="".concat(a.key,"_").concat(o.key),e.some((function(e){return e.key==c}))||Dn.categories.add({key:c,name:o.name,icon:o.icon,isSubcategory:!0,color:r});At.a.push(r)}})).then((function(){return t("getCategories")})).then((function(){return t("getSubcategories")}))}},getters:{categoryOptions:function(e){var t=[],n=null;for(var a in e.categories)n=e.categories[a],t.push({key:n.key,text:n.name,value:n.key,icon:n.icon});return t},subcategoryOptions:function(e){return function(t){var n=[],a=null,r=0;for(r in e.subcategories)a=e.subcategories[r],a.isSubcategory&&a.key.startsWith(t)&&n.push({key:a.key,text:a.name,value:a.key,icon:a.icon});return n}},categorySubcategories:function(e){return function(t){var n=[],a=null,r=0;for(r in e.subcategories)a=e.subcategories[r],a.isSubcategory&&a.key&&a.key.startsWith(t)&&n.push(a);return n}},categoriesKeys:function(e){return e.categories.flatMap((function(e){return e.key}))},otherCategory:function(){var e=Object.assign({},Bn);return e.key="".concat(Bn.key,"_").concat(Bn.key),{category:Object.assign({},Bn),subcategory:e}}}},Kn={key:null,name:"New category",icon:"plus",color:qn.color},Vn={name:"CategoryForm",components:{CategoryPicker:Ht,ColorPickerModal:fn,IconPickerModal:bn,DeleteCategoryButton:jn},data:function(){return{category:{color:qn.color,icon:qn.icon,name:null,key:null},subcategory:{color:qn.color,icon:qn.icon,name:null,key:null}}},computed:Object(L["a"])(Object(L["a"])(Object(L["a"])({},Object(r["d"])("categories",["cache","categories","subcategories"])),Object(r["c"])("categories",["categorySubcategories"])),{},{categoryDeletable:function(){return this.category.key&&this.category.key!=Kn.key},subcategoryDeletable:function(){return this.subcategory.key&&this.subcategory.key!=Kn.key},categoryOptions:function(){return[Object.assign({},Kn)].concat(this.categories)},subcategoryOptions:function(){return[Object.assign({},Kn)].concat(this.categorySubcategories(this.category.key))},previewStyle:function(){var e=this.category.color||qn.color,t={"background-color":e,"box-shadow":"0 0.5em 1em 6px ".concat(e)};return t}}),methods:Object(L["a"])(Object(L["a"])({},Object(r["b"])("categories",["submitCategory"])),{},{submitForm:function(){var e=this,t={category:this.category.name,categoryKey:this.category.key,subcategory:this.subcategory.name,subcategoryKey:this.subcategory.key,color:this.category.color,icon:this.category.icon,isSubcategory:!!this.subcategory.name};this.submitCategory(t).then((function(t){t&&e.$router.push("/")}))},setColor:function(e){this.category.color=e,this.subcategory.color=e},resetCategory:function(){this.category.name=this.category.key=null,this.category.icon=qn.icon,this.category.color=qn.color},resetSubcategory:function(){this.subcategory.name=this.subcategory.key=null,this.subcategory.icon=qn.icon,this.subcategory.color=qn.color}}),watch:{category:function(e,t){for(var n in qn)e[n]?(this.category[n]=e[n],this.subcategory[n]=e[n]):(this.category[n]=qn[n],this.subcategory[n]=qn[n]);e.key===Kn.key&&this.$refs.categoryInput.focus(),this.resetSubcategory()},subcategory:function(e,t){for(var n in qn)e[n]?this.subcategory[n]=e[n]:this.subcategory[n]=qn[n]}}},Hn=Vn,Un=(n("080d"),Object(p["a"])(Hn,Xt,Zt,!1,null,null,null)),Gn=Un.exports,Jn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"preference-form rounded shadow-md p-5",attrs:{name:"preference",method:"POST"},on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.submitForm(t)}}},[e.loaded?n("div",{staticClass:"mb-4"},[n("label",{staticClass:"block font-bold mb-2",attrs:{for:"preferenceKey"}},[e._v(" "+e._s(e.key)+" ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"shadow appearance-none border border-gray-400 rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",attrs:{id:"preferenceKey",name:"preferenceKey",required:""},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}})]):e._e(),e._m(0)])},zn=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"actions text-right"},[n("button",{staticClass:"btn-submit",attrs:{type:"submit"}},[e._v("Save")])])}],Xn={name:"PreferenceForm",data:function(){return{key:null,value:null,loaded:!1}},methods:Object(L["a"])(Object(L["a"])({},Object(r["b"])("preferences",["submitPreference"])),{},{submitForm:function(){var e=this;this.submitPreference({key:this.key,value:this.value}).then((function(t){t>=0&&e.$router.push("/")}))}}),computed:Object(L["a"])({},Object(r["d"])("preferences",["preferences"])),mounted:function(){var e=this;window.setTimeout((function(t){e.key=e.$route.params.key,e.preferences[e.key]&&(e.value=e.preferences[e.key]),e.loaded=!0}),600)}},Zn=Xn,Qn=(n("8e5d"),Object(p["a"])(Zn,Jn,zn,!1,null,null,null)),ea=Qn.exports,ta=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"transfer-form my-4 mx-2",attrs:{name:"transfer"},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.doTransfer(t)}}},[n("h1",[e._v("Transfer")]),n("div",{staticClass:"w-full my-3"},[n("label",{staticClass:"hidden",attrs:{hidden:"",for:"price"}},[e._v("Amount")]),n("money-input",{attrs:{name:"amount",value:e.amount},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})],1),n("div",{staticClass:"w-full"},[n("label",{staticClass:"block",attrs:{for:"from"}},[e._v("From")]),n("accounts-options",{attrs:{account:e.from,exclude:[e.to]},on:{input:function(t){e.from=t}}})],1),n("div",{staticClass:"w-full"},[n("label",{attrs:{for:"to"}},[e._v("To")]),n("accounts-options",{attrs:{account:e.to,exclude:[e.from]},on:{input:function(t){e.to=t}}})],1),e._m(0)])},na=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"actions text-right"},[n("button",{attrs:{positive:"",type:"submit"}},[e._v("Submit")])])}],aa={components:{AccountsOptions:Yt,MoneyInput:it},data:function(){return{amount:0,from:null,to:null}},methods:Object(L["a"])(Object(L["a"])({},Object(r["b"])({transfer:"accounts/transfer"})),{},{doTransfer:function(){var e=this;this.transfer({amount:Math.abs(this.amount),from:this.from,to:this.to}).then((function(t){e.$router.push("/")}))}})},ra=aa,oa=(n("b418"),Object(p["a"])(ra,ta,na,!1,null,null,null)),ca=oa.exports;a["a"].use(S["a"]);var sa=new S["a"]({linkActiveClass:"active",routes:[{path:"/expense/:expense_id",name:"expense-form",component:zt,hide:!0},{path:"/account/:account_key",name:"account-form",component:Pt,hide:!0},{path:"/",name:"home",icon:"home",exact:!0,component:yt},{path:"/transfer",name:"transfer",icon:"exchange-alt",component:ca},{path:"/categories",name:"categories",icon:"database",component:Gn},{path:"/preference/:key",name:"preference",hide:!0,component:ea},{path:"/import-export",name:"data",icon:"folder-open",component:_t},{path:"/about",name:"about",icon:"info",component:P}]}),ia="SKIP_DEFAULT_ACCOUNT",ua={key:"cash",name:"Cash",balance:0,color:"#2ecc70"},la={state:{accounts:[],cache:{}},mutations:{addAccount:function(e,t){e.accounts.push(t)},getAccounts:function(e){Dn.accounts.toArray().then((function(t){return e.accounts=t})).then((function(){e.accounts.forEach((function(t,n){e.cache[t.key]=t}))})).catch((function(e){throw console.error("getAccounts:",e),e}))},toggleIncludeAccount:function(e,t){Dn.accounts.get(t).then((function(e){return Dn.accounts.update(e.id,{includeInSummary:!e.includeInSummary})})).catch((function(e){throw console.warn("account not found:",t),e}))}},actions:{createAccount:function(e,t){var n=e.commit;return!t.key&&t.name&&(t.key=t.name.toLowerCase()),Dn.accounts.add(t).then((function(e){return t.id=e,n("addAccount",t),e})).catch((function(e){throw console.error("[ACTION] createAccount:",e),e}))},toggleIncludeAccount:function(e,t){var n=e.commit;n("toggleIncludeAccount",t),window.setTimeout((function(e){n("getAccounts")}),180)},submitAccount:function(e,t){e.commit;var n=e.dispatch,a=(e.state,t.key?"updateAccount":"createAccount");return console.debug("[ACTION] submitAccount:",a,t),n(a,t).then((function(e){return e}))},updateAccount:function(e,t){e.commit;var n=e.state;return Dn.accounts.get({key:t.key}).then((function(e){return t.id=e.id,Dn.accounts.update(t.id,t)})).then((function(e){return e>0&&n.accounts.map((function(e){if(e.id===t.id)for(var n in t)e[n]=t[n]})),e}))},add:function(e,t){var n=e.commit;return Dn.accounts.get({key:t.key}).then((function(e){if(!e)throw"Account not found: ".concat(t.key);var n={balance:Number(e.balance+t.amount)};return Dn.accounts.update(e.id,n)})).then((function(e){return n("getAccounts"),e})).catch((function(e){console.error("accounts/add:",e)}))},transfer:function(e,t){e.commit;var n=e.dispatch,a=e.state;if(!a.cache[t.from]||!a.cache[t.to])throw"Invalid accounts";var r=Number(t.amount);n("add",{amount:-1*r,key:a.cache[t.from].key}).then((function(e){return n("add",{amount:r,key:a.cache[t.to].key})})).then((function(e){return!0}))},deleteAccount:function(e,t){var n=e.commit,a=e.dispatch;return t.key==ua.key&&a("preferences/createPreference",{key:ia,value:!0},{root:!0}),Dn.accounts.delete(t.id).then((function(e){return n("getAccounts"),e}))},deleteAll:function(e){var t=e.dispatch;Dn.accounts.toArray().then((function(e){for(var n in e)t("deleteAccount",e[n])})).catch((function(e){throw console.error("accounts/deleteAll:",e),e}))},importAccounts:function(e,t){var n=e.dispatch;Dn.accounts.toArray().then((function(e){var a,r=!1,o=Object(xe["a"])(t);try{var c=function(){var t=a.value;r=e.some((function(e){return e.id===t.id&&e.name===t.name})),r||n("createAccount",t)};for(o.s();!(a=o.n()).done;)c()}catch(s){o.e(s)}finally{o.f()}})).catch((function(e){throw console.error("accounts/importAccount:",e),e}))},createCashAccount:function(e){var t=e.commit;Dn.preferences&&Dn.preferences.where("key").equals(ia).toArray().then((function(e){return 0===e.length||!e[0].value})).then((function(e){if(e)return Dn.accounts.where("key").equals(ua.key).toArray()})).then((function(e){e&&0===e.length&&Dn.accounts.add(ua).then((function(e){t("addAccount",ua)}))}))},seedData:function(e){var t=e.commit,n=(e.state,2),a=0,r={};for(a=1;a<=n;++a)r={key:"account".concat(a),name:"Account #".concat(a),balance:100*a,color:"#".concat(2*a).concat(4*a+1).concat(2*a+3)},Dn.accounts.add(r);Dn.accounts.add({key:"cash",name:"Cash",balance:100*a,color:"#00dd00"}),t("getAccounts")}},getters:{totalBalance:function(e){return 0===e.accounts.length?0:e.accounts.filter((function(e){return e.includeInSummary})).map((function(e){return e.balance})).reduce((function(e,t){return e+t}),0)},accountsOptions:function(e){var t=[],n=null;for(var a in e.accounts)n=e.accounts[a],t.push({key:n.id,text:n.name,value:n.id});return t}}},fa=(n("1276"),n("498a"),n("6b58")),da=n.n(fa);da.a.validators.notZero=function(e,t,n,a){var r=null;return 0===e&&(r="cannot be zero"),r};var pa={price:{presence:!0,numericality:!0,notZero:!0},date:{presence:!0},category:{presence:!0,length:{minimum:1}},subcategory:{presence:!0,length:{minimum:1}},description:{presence:!1,length:{minimum:1,maximum:128}}};var ma={namespaced:!0,state:{expenseErrors:{},expenses:[],filters:[{field:"date",op:">=",value:c()().startOf("month").toDate(),name:"lapse"}]},mutations:{createExpense:function(e,t){return t.date=new Date(t.date),Dn.expenses.add(t)},getExpenses:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.decreasing=t.decreasing||!0,Dn.expenses.toArray().then((function(e){var t,n=Object(xe["a"])(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.date=c()(a.date)}}catch(r){n.e(r)}finally{n.f()}return e})).then((function(t){return t.filter((function(t){return we(t,e.filters)}))})).then((function(e){return t.decreasing?e.sort((function(e,t){return t.date-e.date})):e.sort((function(e,t){return e.date-t.date})),e})).then((function(t){e.expenses=t})).catch((function(e){throw console.error("getExpenses:",e),e}))},setFilters:function(e,t){e.filters=t}},actions:{createExpense:function(e,t){var n=e.commit,a=e.dispatch;if(n("createExpense",t),t.account){var r={key:t.account,amount:t.price};a("accounts/add",r,{root:!0})}return 1},updateExpense:function(e,t){e.commit,e.state;return t.date&&(t.date=new Date(t.date)),Dn.expenses.update(t.id,t)},submitExpense:function(e,t){var n=e.commit,a=e.dispatch,r=e.state,o=t.id?"updateExpense":"createExpense",c={account:t.account,category:t.category,date:t.date,description:null!=t.description?t.description.trim():null,price:t.price,subcategory:t.subcategory};t.id&&(c.id=Number(t.id));var s=da()(c,pa);return s?(console.error("submitExpense:",s),r.expenseErrors=s,!1):a(o,c).then((function(e){return n("getExpenses"),r.expenseErrors={},!0}))},deleteExpense:function(e,t){var n=e.commit;return Dn.expenses.delete(t).then((function(e){return n("getExpenses"),e}))},deleteAll:function(e){var t=e.dispatch;Dn.expenses.toArray().then((function(e){for(var n in e)t("deleteExpense",e[n].id)})).catch((function(e){throw console.error("expenses/deleteAll:",e),e}))},setFilters:function(e,t){var n=e.commit;n("setFilters",t),window.setTimeout((function(){n("getExpenses")}),5)},importExpenses:function(e,t){var n=e.commit;e.dispatch;Dn.expenses.toArray().then((function(e){return e.forEach((function(e){return e.date=c()(e.date)})),e})).then((function(e){var a,r=!1,o=Object(xe["a"])(t);try{var s=function(){var t=a.value;t.date=c()(t.date),r=e.some((function(e){return e.price==t.price&&t.date.isSame(e.date)})),r||(delete t.id,n("createExpense",t))};for(o.s();!(a=o.n()).done;)s()}catch(i){o.e(i)}finally{o.f()}})).then((function(){n("getExpenses")})).catch((function(e){throw console.error("expenses/importExpense:",e),e}))},seedData:function(e){var t=e.commit;e.state;Dn.categories.toArray().then((function(e){return e.filter((function(e){return e.isSubcategory}))})).then((function(e){var n=15,a=0,r=null;for(a=1;a<=n;++a){r=e[Math.floor(Math.random()*e.length)];var o={description:"Example expense #".concat(a),price:-1*Math.floor(80*Math.random()+20),category:r.key.split("_")[0],subcategory:r.key,date:new Date(c()().subtract(a,"d").toISOString())};Dn.expenses.add(o)}t("getExpenses")}))}},getters:{totalExpenses:function(e){return 0===e.expenses.length?0:e.expenses.filter((function(e){return e.price<0})).map((function(e){return e.price})).reduce((function(e,t){return e+t}))},expensesPastWeek:function(e){return Ce(e.expenses,1,"week",{onlyNegative:!0})},expensesPastMonth:function(e){return Ce(e.expenses,1,"month",{onlyNegative:!0})}}},ha=["key","value"],ya={state:{preferences:{}},mutations:{getPreferences:function(e){Dn.preferences.toArray().then((function(t){var n,a=Object(xe["a"])(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;e.preferences[r.key]=r.value}}catch(o){a.e(o)}finally{a.f()}})).catch((function(e){throw console.error("preferences/getPreferences:",e),e}))},setPreference:function(e,t){e.preferences[t.key]=t.value}},actions:{submitPreference:function(e,t){var n,a=e.commit,r=(e.dispatch,e.state),o=null,c=Object(xe["a"])(ha);try{for(c.s();!(n=c.n()).done;){var s=n.value;if(!t[s]||""===t[s]||t[s].trim&&""===t[s].trim())return console.error("preferences/updatePreference: missing",s,t),!1}}catch(i){c.e(i)}finally{c.f()}return o=r.preferences[t.key]?Dn.preferences.update(t.key,t):Dn.preferences.add(t),o.then((function(e){return a("setPreference",t),e}))},importPreferences:function(e,t){var n=e.dispatch;Dn.preferences.toArray().then((function(e){var a,r=!1,o=Object(xe["a"])(t);try{var c=function(){var t=a.value;r=e.some((function(e){return e.key===t.key})),n(r?"updatePreference":"createPreference",t)};for(o.s();!(a=o.n()).done;)c()}catch(s){o.e(s)}finally{o.f()}})).catch((function(e){throw console.error("preferences/importPreference:",e),e}))}},getters:{}},ga={accounts:la,categories:Wn,expenses:ma,preferences:ya},ba=(n("3ca3"),n("ddb0"),n("2b3d"),{"Á":"A","á":"a","É":"E","é":"e","Í":"I","í":"i","Ó":"O","ó":"o","Ú":"U","ú":"u","Ä":"A","ä":"a","Ë":"E","ë":"e","Ï":"I","ï":"i","Ö":"O","ö":"o","Ü":"U","ü":"u","Ñ":"N","ñ":"n"}),va=[];for(var xa in ba)va.push([new RegExp(xa,"g"),ba[xa]]);function ka(e){var t=null,n=new String(e);for(t in va)n=n.replace(va[t][0],va[t][1]);return n}function _a(e,t){return"string"===typeof t?ka(t):t}function wa(e,t){var n=document.createElement("a"),a=new Blob([JSON.stringify(t,_a)],{type:"application/octet-stream"}),r=null;r=window.URL.createObjectURL(a),n.setAttribute("href",r),n.setAttribute("download",e),n.setAttribute("target",e),n.style.visibility="hidden",document.body.appendChild(n),n.click(),window.setTimeout((function(e){document.body.removeChild(n),window.URL.revokeObjectURL(r)}),500)}var Ca=function(){var e=Object(kn["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={},n=[],n.push(Dn.accounts.toArray().then((function(e){return t.accounts=e}))),n.push(Dn.expenses.toArray().then((function(e){return t.expenses=e}))),n.push(Dn.preferences.toArray().then((function(e){return t.preferences=e}))),e.next=7,Promise.all(n);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a["a"].use(r["a"]);var Oa=new r["a"].Store({modules:{accounts:Object(L["a"])({namespaced:!0},ga.accounts),categories:Object(L["a"])({namespaced:!0},ga.categories),expenses:Object(L["a"])({namespaced:!0},ga.expenses),preferences:Object(L["a"])({namespaced:!0},ga.preferences)},state:{},mutations:{},actions:{deleteData:function(e){var t=e.dispatch;t("accounts/deleteAll"),t("expenses/deleteAll")},exportData:function(e){e.state;var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json";Ca().then((function(e){wa("my_finances.".concat(t),e)}))},importData:function(e,t){var n=e.dispatch;t.accounts&&n("accounts/importAccounts",t.accounts),t.expenses&&n("expenses/importExpenses",t.expenses),t.preferences&&n("preferences/importPreferences",t.preferences)},seedData:function(e){var t=e.dispatch;t("accounts/seedData"),t("expenses/seedData")}},getters:{balanceSummary:function(e,t,n){return t["accounts/totalBalance"]-t["expenses/totalExpenses"]}}}),ja=n("9483");Object(ja["a"])("".concat("","service-worker.js"),{ready:function(){console.log("[Service Worker] ready...")},registered:function(){console.log("[Service Worker] registered...")},cached:function(){console.log("[Service Worker] cached for offline use...")},updatefound:function(){console.log("[Service Worker] New content found, new version is ".concat(I["VERSION"],"."))},updated:function(){console.log("[Service Worker] Please refresh to donwload version ".concat(I["VERSION"],"."))},offline:function(){console.log("[Service Worker] App is running in offline mode.")},error:function(e){console.error("[Service Worker] Error during service worker registration:",e)}});n("fb98");var Sa=n("ecee"),Aa=n("b702"),Ea=n("ad3d");for(var Da in Sa["c"].add(Aa["a"]),Sa["c"].add(mn["a"]),window.dayjs=c.a,a["a"].use(r["a"]),a["a"].config.productionTip=!1,a["a"].component("fa",Ea["a"]),Tn)a["a"].filter(Da,Tn[Da]);new a["a"]({router:sa,store:Oa,filters:Tn,render:function(e){return e(j)}}).$mount("#app")},5862:function(e,t,n){},5892:function(e,t,n){"use strict";n("8d20")},"59e7":function(e,t,n){"use strict";n("389d")},"5da6":function(e,t,n){"use strict";n("1a14")},"5e06":function(e,t,n){function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100%",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"50%",a=[],r=0;for(r=0;r<360;r+=e)a.push("hsl(".concat(r,", ").concat(t,", ").concat(n,")"));return a}n("99af");var r=a(20,"100%","35%");e.exports=r,e.exports.colors=r,e.exports.primary=r[15],e.exports.secondary=r[5]},"66e0":function(e,t,n){},"6dfe":function(e,t,n){"use strict";n("fdef")},7529:function(e,t,n){},"7d55":function(e,t,n){},8e3:function(e,t,n){"use strict";n("5862")},"83b7":function(e,t,n){"use strict";n("85b6")},"84b4":function(e,t,n){"use strict";n("2c67")},"85b6":function(e,t,n){},8718:function(e,t,n){},"8d20":function(e,t,n){},"8e5d":function(e,t,n){"use strict";n("da60")},"92ab":function(e,t,n){"use strict";n("7d55")},9741:function(e,t,n){},"9f72":function(e,t,n){},"9f85":function(e){e.exports=JSON.parse('{"categories":[{"key":"food","name":"Food & Drinks","icon":"utensils","subcategories":[{"key":"groceries","name":"Groceries","icon":"shopping-basket"},{"key":"restaurant","name":"Restaurant","icon":"utensils"},{"key":"fastfood","name":"Fast Food","icon":"utensils"},{"key":"coffee","name":"Coffee","icon":"coffee"},{"key":"bar","name":"Bar","icon":"beer"},{"key":"petfood","name":"Pet Food","icon":"dog"},{"key":"other","name":"Other","icon":"shopping-cart"}]},{"key":"shopping","name":"Shopping","icon":"tags","subcategories":[{"key":"gifts","name":"Gifts","icon":"gift"},{"key":"clothes","name":"Clothes","icon":"shopping-cart"},{"key":"books","name":"Books","icon":"book"},{"key":"other","name":"Other","icon":"tag"}]},{"key":"health","name":"Health & Beauty","icon":"heartbeat","subcategories":[{"key":"hospital","name":"Hospital","icon":"stethoscope"},{"key":"dentist","name":"Dentist","icon":"user-md"},{"key":"medicines","name":"Medicines","icon":"pills"},{"key":"gym","name":"Gym","icon":"balance-scale"},{"key":"haircut","name":"Haircut","icon":"cut"}]},{"key":"hobbies","name":"Hobbies","icon":"hiking","subcategories":[{"key":"movies","name":"Movies","icon":"film"},{"key":"nature","name":"Nature","icon":"leaf"},{"key":"museums","name":"Museums","icon":"university"},{"key":"vacations","name":"Vacations","icon":"map"},{"key":"concerts","name":"Concerts","icon":"music"},{"key":"sports","name":"Sports","icon":"futbol"}]},{"key":"social","name":"Social","icon":"users","subcategories":[{"key":"gathering","name":"Gathering","icon":"users"},{"key":"drinks","name":"Drinks","icon":"beer"},{"key":"other","name":"Other","icon":"street-view"}]},{"key":"household","name":"Household","icon":"home","subcategories":[{"key":"cleaning","name":"Cleaning Products","icon":"bath"},{"key":"services","name":"Basic Services","icon":"home"},{"key":"rent","name":"Rent","icon":"home"},{"key":"other","name":"Other","icon":"dollar-sign"}]},{"key":"transport","name":"Transportation","icon":"bicycle","subcategories":[{"key":"taxi","name":"Taxi","icon":"taxi"},{"key":"public","name":"Public Transport","icon":"subway"},{"key":"flights","name":"Flights","icon":"plane"},{"key":"other","name":"Other","icon":"car"}]},{"key":"tech","name":"Technology","icon":"laptop","subcategories":[{"key":"hosting","name":"Hosting","icon":"hdd"},{"key":"gadgets","name":"Gadgets","icon":"phone"},{"key":"videogames","name":"Videogames","icon":"gamepad"},{"key":"streaming","name":"Streaming","icon":"cloud"},{"key":"software","name":"Software","icon":"keyboard"},{"key":"other","name":"Other","icon":"save"}]},{"key":"subscriptions","name":"Subscriptions","icon":"sync","subcategories":[{"key":"insurance","name":"Insurance","icon":"certificate"},{"key":"streaming","name":"Streaming","icon":"tv"},{"key":"donations","name":"Donations","icon":"heart"},{"key":"other","name":"Other","icon":"sync"}]},{"key":"income","name":"Income","icon":"dollar-sign","subcategories":[{"key":"income","name":"Wage, Invoices","icon":"dollar-sign"},{"key":"investments","name":"Interests, Dividends","icon":"chart-line"},{"key":"presents","name":"Gifts","icon":"birthday-cake"},{"key":"rental","name":"Rental Income","icon":"building"},{"key":"sales","name":"Sales","icon":"handshake"}]},{"key":"other","name":"Other","icon":"dollar-sign","subcategories":[{"key":"other","name":"Other","icon":"dollar-sign"}]}]}')},a071:function(e,t,n){"use strict";n("c25f")},b068:function(e,t,n){},b418:function(e,t,n){"use strict";n("7529")},c232:function(e,t){e.exports={NAME:"My Finances",VERSION:"0.4.0"}},c25f:function(e,t,n){},d25e:function(e,t,n){"use strict";n("00fa")},da60:function(e,t,n){},e30f:function(e,t,n){},e5b8:function(e,t,n){"use strict";n("8718")},ec42:function(e,t,n){"use strict";n("66e0")},f004:function(e,t,n){},f044:function(e,t,n){"use strict";n("449d")},f203:function(e,t,n){"use strict";n("9741")},f336:function(e,t,n){"use strict";n("e30f")},fb98:function(e,t,n){},fdef:function(e,t,n){}});